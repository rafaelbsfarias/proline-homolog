```mermaid
stateDiagram-v2
    %% ========================================
    %% LOADING ORCHESTRATOR STATE MACHINE
    %% ========================================
    
    [*] --> Idle: Component mounts
    
    state "ðŸŸ¢ Idle" as Idle {
        [*] --> WaitingForRegistration
        WaitingForRegistration: No loading operations registered
        WaitingForRegistration: isLoading = false
    }
    
    state "ðŸ”µ Registering" as Registering {
        [*] --> AddingLoader
        AddingLoader: Component calls register(key, fn)
        AddingLoader: Loader added to registry
        AddingLoader --> CheckAutoExecute
        CheckAutoExecute: autoExecuteOnMount = true?
        CheckAutoExecute --> ExecuteAll: Yes
        CheckAutoExecute --> Idle: No
    }
    
    state "â³ Loading" as Loading {
        [*] --> ExecutingAll
        ExecutingAll: Executing all registered loaders in parallel
        ExecutingAll: isLoading = true
        ExecutingAll: Promise.all(loaders.map(fn => fn()))
        ExecutingAll --> CheckResults
        
        state CheckResults <<choice>>
        CheckResults --> AllSuccess: All succeeded
        CheckResults --> SomeErrors: Some failed
        
        state "âœ… All Success" as AllSuccess {
            allSuccess: All loaders completed successfully
            allSuccess: isLoading = false
            allSuccess: errors = {}
        }
        
        state "âŒ Some Errors" as SomeErrors {
            someErrors: Some loaders failed
            someErrors: isLoading = false
            someErrors: errors = { [key]: error, ... }
        }
    }
    
    state "ðŸ”„ Reloading" as Reloading {
        [*] --> ExecutingSingle
        ExecutingSingle: reload(key) called
        ExecutingSingle: isLoading = true
        ExecutingSingle: Execute single loader by key
        ExecutingSingle --> SingleComplete
        
        state "âœ… Single Complete" as SingleComplete {
            singleComplete: Loader completed
            singleComplete: isLoading = false
            singleComplete: Update errors if failed
        }
    }
    
    state "ðŸ—‘ï¸ Unregistering" as Unregistering {
        [*] --> RemovingLoader
        RemovingLoader: Component calls unregister(key)
        RemovingLoader: Loader removed from registry
        RemovingLoader --> Idle
    }
    
    %% State transitions
    Idle --> Registering: register(key, fn)
    Idle --> Loading: executeAll()
    Idle --> Reloading: reload(key)
    Idle --> Unregistering: unregister(key)
    
    Registering --> Idle: Registration complete
    Registering --> Loading: autoExecuteOnMount
    
    Loading --> Idle: All complete (success or errors)
    Reloading --> Idle: Single loader complete
    Unregistering --> Idle: Unregistration complete
    
    AllSuccess --> Idle: Continue
    SomeErrors --> Idle: Continue
    SingleComplete --> Idle: Continue
    
    Idle --> [*]: Component unmounts
    
    note right of Idle
        Hook State:
        â€¢ loaders: Map<string, () => Promise<void>>
        â€¢ isLoading: boolean
        â€¢ errors: Record<string, Error>
        
        Exposed API:
        â€¢ register(key, fn)
        â€¢ unregister(key)
        â€¢ executeAll()
        â€¢ reload(key)
        â€¢ isLoading
        â€¢ getError(key)
    end note
    
    note right of Loading
        Benefits:
        â€¢ Centralized loading state
        â€¢ Automatic parallel execution
        â€¢ Individual error tracking
        â€¢ Automatic cleanup on unmount
        â€¢ Self-registration pattern
    end note
    
    note right of SomeErrors
        Error Handling:
        â€¢ Errors are isolated per loader
        â€¢ Other loaders continue executing
        â€¢ Components can check errors by key
        â€¢ Failed loaders can be retried individually
    end note
```
