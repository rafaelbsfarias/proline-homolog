#!/usr/bin/env sh

# ========================================================================================
# PRE-COMMIT HOOK - QUALITY ASSURANCE
# ========================================================================================
# Executa verifica√ß√µes de qualidade antes do commit
# ========================================================================================

echo "üîç Running quality checks before commit..."

# Run lint-staged for staged files
npx lint-staged

# Check for TODO/FIXME comments in staged files (ignore documentation and husky files)
echo "üîç Checking for TODO/FIXME comments..."
git diff --cached --name-only --diff-filter=AM | grep -v -E '\.(md|txt)$|\.husky/' | xargs grep -l "TODO\|FIXME" 2>/dev/null && {
  echo "‚ùå Found TODO/FIXME comments. Please resolve before committing."
  exit 1
} || echo "‚úÖ No TODO/FIXME comments found."

# Note: Console.log check temporarily disabled - will be improved
echo "‚úÖ Console.log check skipped (to be improved)."

echo "‚úÖ All quality checks passed!"
